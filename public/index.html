<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Video App</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .page { display: none; }
        .active { display: block; }
        button { margin: 5px; padding: 8px 15px; }
        input, select { margin: 5px; padding: 8px; }
        ul { list-style: none; padding: 0; }
        li { margin: 10px 0; padding: 10px; border: 1px solid #ddd; }
        .status-completed { color: green; }
        .status-processing { color: orange; }
        .status-error { color: red; }
    </style>
</head>
<body>
<h1>Video Transcoder</h1>

<!-- Navigation -->
<div>
    <button onclick="showPage('loginPage')">Login</button>
    <button onclick="showPage('registerPage')">Register</button>
    <button onclick="showPage('uploadPage')">Upload</button>
    <button onclick="showPage('videosPage')">My Videos</button>
    <button id="adminNav" onclick="showPage('adminPage')" style="display: none; background: #ff6b6b; color: white;">Admin Panel</button>
    <button onclick="logout()" style="float: right;">Logout</button>
</div>

<hr>

<!-- Login Page -->
<div id="loginPage" class="page active">
    <h2>Login</h2>
    <div style="background: #f0f8ff; padding: 10px; border-radius: 5px; margin: 10px 0;">
        <strong>ðŸ”’ Secure Login:</strong> After entering your password, check your email for a verification code.
    </div>
    <form id="loginForm">
        <input type="text" id="username" placeholder="Username" required><br>
        <input type="password" id="password" placeholder="Password" required><br>
        <button type="submit">Login</button>
    </form>
    <p id="loginMessage"></p>
    <button onclick="showPage('registerPage')">Need to register?</button>
</div>

<!-- MFA login page -->
<div id="mfaPage" class="page" style="display: none;">
    <h2>Email Verification</h2>
    <p>We sent a verification code to your email address.</p>
    <p>Please check your inbox and enter the code below:</p>

    <form id="mfaForm">
        <input type="text" id="mfaCode" placeholder="Enter 6-digit code" required>
        <button type="submit">Verify</button>
    </form>

    <button onclick="showPage('loginPage')">Back to Login</button>
</div>

<!-- Registration Page -->
<div id="registerPage" class="page">
    <h2>Register</h2>
    <form id="registerForm">
        <input type="text" id="regUsername" placeholder="Username" required><br>
        <input type="email" id="regEmail" placeholder="Email" required><br>
        <input type="password" id="regPassword" placeholder="Password" required><br>
        <button type="submit">Register</button>
    </form>
    <p id="registerMessage"></p>
    <button onclick="showPage('loginPage')">Back to Login</button>
</div>

<!-- Confirm Page -->
<div id="confirmPage" class="page">
    <h2>Confirm Email</h2>
    <form id="confirmForm">
        <input type="text" id="confirmUsername" placeholder="Username" required><br>
        <input type="text" id="confirmationCode" placeholder="Confirmation Code" required><br>
        <button type="submit">Confirm</button>
    </form>
    <p id="confirmMessage"></p>
    <button onclick="showPage('loginPage')">Back to Login</button>
</div>

<!-- Upload Page -->
<div id="uploadPage" class="page">
    <h2>Upload Video</h2>
    <form id="uploadForm">
        <input type="file" id="videoFile" accept="video/*" required><br>
        <button type="submit">Upload to S3</button>
    </form>
    <p id="uploadMessage"></p>
</div>

<!-- Videos Page -->
<div id="videosPage" class="page">
    <h2>My Videos</h2>
    <button onclick="fetchVideos()">Refresh Videos</button>
    <ul id="videoList"></ul>
</div>

<!-- Admin Page -->
<div id="adminPage" class="page">
    <h2>Admin Panel</h2>
    <div style="margin: 20px 0;">
        <button onclick="fetchAdminStats()">Load Statistics</button>
        <button onclick="fetchAllVideos()">View All Videos</button>
        <button onclick="fetchAnalyticsSummary()">View Analytics</button>
    </div>

    <div id="adminStats" style="background: #f5f5f5; padding: 15px; margin: 20px 0; border-radius: 5px;"></div>

    <div id="analyticsSummary" style="background: #e8f4fd; padding: 15px; margin: 20px 0; border-radius: 5px;"></div>

    <div>
        <h3>All Videos</h3>
        <ul id="adminVideoList"></ul>
    </div>
</div>

<script src="app.js"></script>
</body>
</html>